(function(t){function e(e){for(var n,a,o=e[0],c=e[1],u=e[2],h=0,p=[];h<o.length;h++)a=o[h],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&p.push(s[a][0]),s[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(p.length)p.shift()();return r.push.apply(r,u||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,o=1;o<i.length;o++){var c=i[o];0!==s[c]&&(n=!1)}n&&(r.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},s={app:0},r=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"16f0":function(t,e,i){},"1e72":function(t,e,i){"use strict";i("3bf6")},2395:function(t,e,i){},"2ada":function(t,e,i){"use strict";i("16f0")},"2c81":function(t,e,i){t.exports=i.p+"img/404.93dd748a.jpg"},"3bf6":function(t,e,i){},"3c18":function(t,e,i){},"42f1":function(t,e,i){},4374:function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),s=i("b970"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"view-container"},[i("router-view")],1)])},a=[];function o(t,e,i){var n=e,s=n[i]+t,r=0,a=4;t<0&&(a*=-1);var o=setInterval((function(){r+=a,n[i]+=a,Math.abs(r)>Math.abs(t)&&(n[i]=s,clearInterval(o))}),.06)}var c="goods";function u(t){var e=t||c;return JSON.parse(localStorage.getItem(e))}function l(t,e){var i=u()||{};i[t]=e,0===e&&delete i[t],localStorage.setItem(c,JSON.stringify(i))}var h={created:function(){l()}},p=h,d=(i("7c55"),i("2877")),g=Object(d["a"])(p,r,a,!1,null,null,null),m=g.exports,f=i("8c4f"),v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"Home-container"},[i("h2",[t._v("这是首页")]),i("BottomNav")],1)},b=[],y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bottomnav-container"},[i("van-tabbar",{attrs:{route:"",fixed:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[i("van-tabbar-item",{attrs:{name:"home",to:"/home",icon:"home-o"}},[t._v(" 首页 ")]),i("van-tabbar-item",{attrs:{name:"classify",to:"/classify",icon:"apps-o"}},[t._v(" 分类 ")]),i("van-tabbar-item",{ref:"shopping",attrs:{name:"shopping",badge:t.$store.state.shoppingTotal,to:"/shopping",icon:"shopping-cart-o"}},[t._v(" 购物车 ")]),i("van-tabbar-item",{attrs:{name:"user",to:"/user",icon:"user-circle-o"}},[t._v(" 我的 ")])],1)],1)},L=[],k=(i("07ac"),i("159b"),{data:function(){return{active:"home"}},created:function(){var t=0,e=u(),i=Object.values(e);i.forEach((function(e){t+=e})),this.$store.commit("changeShoppingTotal",t)},watch:{"$store.state.goodsList":{handler:function(){var t=0,e=u(),i=Object.values(e);i.forEach((function(e){t+=e})),this.$store.commit("changeShoppingTotal",t)},deep:!0}},mounted:function(){var t=this.$refs.shopping.$el.getBoundingClientRect(),e=t.top,i=t.left;this.$store.commit("changeShoppingTop",e),this.$store.commit("changeShoppingLeft",i)}}),_=k,x=Object(d["a"])(_,y,L,!1,null,"6ba1c28f",null),j=x.exports,w={components:{BottomNav:j}},C=w,T=(i("be6e"),Object(d["a"])(C,v,b,!1,null,"2f736078",null)),$=T.exports,R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"classIfy-container"},[i("router-link",{attrs:{to:"/search"}},[i("div",{staticClass:"search-content"},[i("van-icon",{attrs:{name:"search"}}),i("span",[t._v("你想吃什么呢?")])],1)]),i("div",{staticClass:"primary-nav"},[i("Primarynav")],1),i("div",{staticClass:"main"},[i("SideBar",{attrs:{sortType:t.sortType}}),i("div",{staticClass:"main-content"},[i("div",{staticClass:"top-nav van-hairline--top-bottom"},[i("div",{class:{active:"all"===t.selectType},on:{touchend:function(e){t.selectType="all"}}},[t._v(" 综合 ")]),i("div",{class:{active:"sale"===t.selectType},on:{touchend:function(e){t.selectType="sale"}}},[t._v(" 销量 ")]),i("div",{staticClass:"arrow",class:{active:"price"===t.selectType,up:"price"===t.selectType&&t.isup,down:"price"===t.selectType&&!t.isup},on:{touchend:function(e){t.selectType="price",t.isup=!t.isup}}},[t._v(" 价格 ")])]),i("div",{staticClass:"goods-list"},[i("GoodsLists",{attrs:{sortType:t.sortType}})],1)])],1),i("BottomNav")],1)},N=[],O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"primarynav-container"},t._l(t.menuList,(function(e,n){return i("div",{key:n,staticClass:"item",class:{active:n===t.index},on:{touchend:function(e){return t.handleTouch(n,e)},touchmove:function(e){t.isMove=!0}}},[i("div",{staticClass:"img-container"},[i("img",{attrs:{src:e.imgURL}})]),i("div",{staticClass:"title"},[t._v(t._s(e.title))])])})),0)},S=[],E=i("1da1"),U=(i("96cf"),{created:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.dispatch("getSidebar",t.menuList[t.index].title);case 1:case"end":return e.stop()}}),e)})))()},data:function(){return{menuList:[{title:"时令水果",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/时令水果.jpg"},{title:"酒水冲调",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/酒水冲调.jpg"},{title:"安心乳品",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/安心乳品.jpg"},{title:"休闲零食",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/休闲零食.jpg"},{title:"肉蛋食材",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/肉蛋食材.jpg"},{title:"新鲜蔬菜",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/新鲜食材.jpg"},{title:"熟食餐饮",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/熟食餐饮.jpg"},{title:"海鲜水产",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/海鲜水产.jpg"},{title:"粮油调味",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/粮油调味.jpg"},{title:"某手美食",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/某手美食.jpg"},{title:"纸杯清洁",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/纸品清洁.jpg"},{title:"个人护理",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/个人护理.jpg"},{title:"美妆护肤",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/美妆护肤.jpg"},{title:"家居收纳",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/家居收纳.jpg"},{title:"家用电器",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/家用电器.jpg"},{title:"3C数码",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/3C数码.jpg"},{title:"母婴用品",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/母婴用品.jpg"},{title:"鲜花绿植",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/鲜花绿植.jpg"},{title:"宠物用品",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/宠物用品.jpg"},{title:"图书玩具",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/图书文具.jpg"},{title:"手表配饰",imgURL:"https://duyi-bucket.oss-cn-beijing.aliyuncs.com/img/手表配饰.jpg"}],index:0,isMove:!1}},methods:{move:o,handleTouch:function(t,e){var i=this;return Object(E["a"])(regeneratorRuntime.mark((function n(){var s,r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!i.isMove){n.next=3;break}return i.isMove=!1,n.abrupt("return");case 3:i.index=t,s=Math.round(e.target.getBoundingClientRect().left),r=e.target.offsetWidth,a=i.$refs.container.offsetWidth,o=Math.round(s+r/2-a/2),i.move(o,i.$refs.container,"scrollLeft"),i.$store.dispatch("getSidebar",i.menuList[i.index].title);case 10:case"end":return n.stop()}}),n)})))()}}}),I=U,B=(i("e788"),Object(d["a"])(I,O,S,!1,null,"88900e64",null)),G=B.exports,M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"goodslists-container"},[i("van-pull-refresh",{attrs:{id:"content"},on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[i("van-list",{attrs:{"immediate-check":!1,finished:t.finished,"finished-text":"就这些了 要不吃点别的吧！","v-if":void 0!=t.$store.state.type},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,n){return i("div",{key:n,staticClass:"goods-card van-hairline--bottom"},[i("div",{staticClass:"img",attrs:{id:"img"+n}},[i("img",{attrs:{src:e.images[0]}})]),i("div",{staticClass:"container"},[i("div",{staticClass:"title"},[t._v(t._s(e.title))]),i("div",{staticClass:"desc"},[t._v(t._s(e.desc))]),i("div",{staticClass:"tag"},t._l(e.tags,(function(e,n){return i("div",{key:n,staticClass:"item"},[t._v(" "+t._s(e)+" ")])})),0),i("div",{staticClass:"price"},[t._v("￥"+t._s(e.price))]),i("div",{staticClass:"num"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.selectNumber>0,expression:"item.selectNumber > 0"}],staticClass:"reduce",on:{touchend:function(e){return t.handleReduce(n)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.selectNumber>0,expression:"item.selectNumber > 0"}],staticClass:"number"},[t._v(" "+t._s(e.selectNumber)+" ")]),i("div",{staticClass:"increase",on:{touchend:function(e){return t.handleIncrease(n)}}})])])])})),0)],1)],1)},P=[];i("d81d"),i("99af");function z(t){var e=t.origin,i=t.target,n=e.originUrl,s=e.originWidth,r=e.originHeight,a=e.originTop,o=e.originLeft,c=i.targetTop,u=i.targetLeft,l=document.createElement("img");l.src=n,l.style="position: fixed;\n    width: ".concat(s,"px;\n    height: ").concat(r,"px;\n    top: ").concat(a,"px;\n    left: ").concat(o,"px;\n    z-index: 999;\n    opacity: 1;"),document.body.appendChild(l);var h=l.clientHeight;h&&l.addEventListener("transitionend",(function(t){t.target.remove()}));var p=c-a-20,d=u-o;l.style.transform="translateX(".concat(d,"px) translateY(").concat(p,"px) scale(0.1)"),l.style.transition="1s ease",l.style.opacity=0}var H={props:["sortType"],data:function(){return{page:this.$store.state.page,list:this.$store.state.goodsList,loading:this.$store.state.isLoading,finished:this.$store.state.finished,refreshing:this.$store.state.finished}},created:function(){var t=u(),e=this.list.map((function(e){var i=e;return t[e.id]?i.selectNumber=t[e.id]:delete i.selectNumber,e}));this.$store.commit("getGoods",e)},methods:{onLoad:function(){this.$store.dispatch("pushGoods",{type:this.$store.state.type,page:this.page,size:7,sort:this.sortType})},onRefresh:function(){this.$store.dispatch("getGoods",{type:this.$store.state.type,page:1,size:7,sort:this.sortType,refreshing:1})},handleReduce:function(t){this.$store.state.goodsList[t].selectNumber-=1,l(this.list[t].id,this.$store.state.goodsList[t].selectNumber)},handleIncrease:function(t){this.$store.state.goodsList[t].selectNumber||this.$set(this.$store.state.goodsList[t],"selectNumber",0),this.$store.state.goodsList[t].selectNumber+=1,l(this.list[t].id,this.$store.state.goodsList[t].selectNumber);var e=document.getElementById("img".concat(t)),i=this.$store.state.goodsList[t].images[0],n=e.getBoundingClientRect(),s=n.width,r=n.height,a=n.top,o=n.left,c={originUrl:i,originWidth:s,originHeight:r,originTop:a,originLeft:o},u={targetTop:this.$store.state.shoppingTop,targetLeft:this.$store.state.shoppingLeft};z({origin:c,target:u})}},watch:{"$store.state.goodsList":{handler:function(t){this.list=t},deep:!0},"$store.state.isLoading":{handler:function(t){this.loading=t},deep:!0},"$store.state.refreshing":{handler:function(t){this.refreshing=t},deep:!0},"$store.state.finished":{handler:function(t){this.finished=t},deep:!0},"$store.state.page":{handler:function(t){this.page=t},deep:!0}}},F=H,W=(i("ee5d"),Object(d["a"])(F,M,P,!1,null,"3a5ff59e",null)),A=W.exports,J=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"SideBar-container"},[i("div",{ref:"left",staticClass:"left-nav"},t._l(t.$store.state.sidebar,(function(e,n){return i("div",{key:n,staticClass:"item",class:{active:n===t.index},on:{touchend:function(e){return t.handleClick(n,e)},touchmove:function(e){t.isMove=!0}}},[t._v(" "+t._s("string"==typeof e?e:"全部")+" ")])})),0)])},V=[],X={data:function(){return{isMove:!1,index:0}},props:["sortType"],methods:{move:o,handleClick:function(t,e){if(this.isMove)this.isMove=!1;else{this.index=t;var i=this.$refs.left.getBoundingClientRect().top,n=this.$refs.left.offsetHeight,s=e.target.offsetHeight,r=e.target.getBoundingClientRect().top,a=r+s/2-i-n/2;this.move(a,this.$refs.left,"scrollTop"),this.$store.dispatch("getGoods",{type:this.sidebarType,page:1,size:7,sort:this.sortType})}}},computed:{sidebarType:function(){return this.$store.state.sidebar[this.index]}},watch:{sidebarType:{handler:function(){this.$store.dispatch("getGoods",{type:this.sidebarType,page:1,size:7,sort:this.sortType})}}}},Y=X,q=(i("2ada"),Object(d["a"])(Y,J,V,!1,null,"393ebd6b",null)),D=q.exports,K={components:{Primarynav:G,GoodsLists:A,BottomNav:j,SideBar:D},data:function(){return{selectType:"all",isup:!1}},computed:{sortType:function(){return"price"!==this.selectType?this.selectType:"price-".concat(this.isup?"up":"down")}},watch:{sortType:{handler:function(){this.$store.dispatch("getGoods",{type:this.$store.state.type,page:1,size:7,sort:this.sortType})}}}},Q=K,Z=(i("5cd2"),Object(d["a"])(Q,R,N,!1,null,"23c4536f",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shopping-container"},[i("van-nav-bar",{attrs:{title:"购物车","right-text":"删除"},on:{"click-right":t.onClickRight}}),i("div",{staticClass:"shoppingCar"},[i("van-checkbox-group",{ref:"checkboxGroup",model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.shoppingList,(function(e,n){return i("div",{key:n,staticClass:"goods-card van-hairline--bottom"},[i("van-checkbox",{attrs:{name:n}}),i("div",{staticClass:"img",attrs:{id:"img"+n}},[i("img",{attrs:{src:e.images[0]}})]),i("div",{staticClass:"container"},[i("div",{staticClass:"title"},[t._v(t._s(e.title))]),i("div",{staticClass:"desc"},[t._v(t._s(e.desc))]),i("div",{staticClass:"tag"},t._l(e.tags,(function(e,n){return i("div",{key:n,staticClass:"item"},[t._v(" "+t._s(e)+" ")])})),0),i("div",{staticClass:"price"},[t._v("￥"+t._s(e.price))]),i("div",{staticClass:"num"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.selectNumber>0,expression:"item.selectNumber > 0"}],staticClass:"reduce",on:{touchend:function(e){return t.handleReduce(n)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.selectNumber>0,expression:"item.selectNumber > 0"}],staticClass:"number"},[t._v(" "+t._s(e.selectNumber)+" ")]),i("div",{staticClass:"increase",on:{touchend:function(e){return t.handleIncrease(n)}}})])])],1)})),0)],1),i("van-submit-bar",{attrs:{price:t.totalPrice,"button-text":"去结算("+t.totalNumber+")"},on:{submit:t.onSubmit}},[i("van-checkbox",{on:{click:t.checkAll},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("全选")])],1),i("BottomNav")],1)},it=[],nt=(i("a15b"),i("b64b"),i("4de4"),i("d399")),st=i("2241"),rt=i("bc3a"),at=i.n(rt),ot=at.a.create({baseURL:"https://mallapi.duyiedu.com/goods/",params:{appkey:"dd_1597654682810"}});ot.interceptors.response.use((function(t){return t.data}));var ct=ot;function ut(t){return lt.apply(this,arguments)}function lt(){return lt=Object(E["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct.get("/getsidebar",{params:{type:e}});case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)}))),lt.apply(this,arguments)}function ht(t,e,i,n){return pt.apply(this,arguments)}function pt(){return pt=Object(E["a"])(regeneratorRuntime.mark((function t(e,i,n,s){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct.get("/getGoodsList",{params:{type:e,page:i,size:n,sort:s}});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)}))),pt.apply(this,arguments)}function dt(t){return gt.apply(this,arguments)}function gt(){return gt=Object(E["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct.get("/likeSearch",{params:{likeValue:e}});case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)}))),gt.apply(this,arguments)}function mt(t,e,i){return ft.apply(this,arguments)}function ft(){return ft=Object(E["a"])(regeneratorRuntime.mark((function t(e,i,n){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct.get("/search",{params:{type:e,page:i,size:n}});case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}}),t)}))),ft.apply(this,arguments)}function vt(t){return bt.apply(this,arguments)}function bt(){return bt=Object(E["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ct.get("/getGoodsByIds",{params:{value:e}});case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)}))),bt.apply(this,arguments)}var yt={components:{BottomNav:j},created:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var i,n,s,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=u(),n=Object.keys(i).join(","),e.next=4,vt(n);case 4:s=e.sent,t.shoppingList=s.list,t.shoppingList.forEach((function(e){var n=e;t.$set(n,"selectNumber",i[e.id])})),r=0,a=u(),o=Object.values(a),o.forEach((function(t){r+=t})),t.$store.commit("changeShoppingTotal",r);case 12:case"end":return e.stop()}}),e)})))()},watch:{result:{handler:function(t){t.length===this.shoppingList.length&&0!==t.length?this.checked=!0:(t.length,this.checked=!1)}}},methods:{checkAll:function(){this.result.length===this.shoppingList.length?this.$refs.checkboxGroup.toggleAll():this.$refs.checkboxGroup.toggleAll(!0)},onClickRight:function(){var t=this;0!==this.result.length?st["a"].confirm({title:"提示",message:"确认删除所有选择的商品?"}).then((function(){var e=t.shoppingList.filter((function(e,i){return-1!==t.result.indexOf(i)}));e.forEach((function(t){l(t.id,0)})),t.result.length===t.shoppingList.length&&(t.checked=!1),t.shoppingList=t.shoppingList.filter((function(e,i){return-1===t.result.indexOf(i)})),t.result=[],t.$store.commit("changeShoppingTotal",t.totalNumber)})).catch((function(){})):Object(nt["a"])("请选择商品")},onSubmit:function(){Object(nt["a"])("触发订单提交函数")},handleReduce:function(t){var e=this;1!==this.shoppingList[t].selectNumber?(this.shoppingList[t].selectNumber-=1,l(this.shoppingList[t].id,this.shoppingList[t].selectNumber),this.$store.commit("changeShoppingTotal",this.totalNumber)):st["a"].confirm({title:"提示",message:"确认删除这项商品?"}).then((function(){l(e.shoppingList[t].id,0),e.shoppingList=e.shoppingList.filter((function(e,i){return i!==t})),e.$store.commit("changeShoppingTotal",e.totalNumber)})).catch((function(){}))},handleIncrease:function(t){this.shoppingList[t].selectNumber||this.$set(this.shoppingList[t],"selectNumber",0),this.shoppingList[t].selectNumber+=1,l(this.shoppingList[t].id,this.shoppingList[t].selectNumber),this.$store.commit("changeShoppingTotal",this.totalNumber);var e=document.getElementById("img".concat(t)),i=this.shoppingList[t].images[0],n=e.getBoundingClientRect(),s=n.width,r=n.height,a=n.top,o=n.left,c={originUrl:i,originWidth:s,originHeight:r,originTop:a,originLeft:o},u={targetTop:this.$store.state.shoppingTop,targetLeft:this.$store.state.shoppingLeft};z({origin:c,target:u})}},data:function(){return{checked:!1,shoppingList:[],result:[]}},computed:{totalNumber:function(){var t=this,e=this.shoppingList.filter((function(e,i){return-1!==t.result.indexOf(i)}));return e.reduce((function(t,e){return t+e.selectNumber}),0)},totalPrice:function(){var t=this,e=this.shoppingList.filter((function(e,i){return-1!==t.result.indexOf(i)}));return e.reduce((function(t,e){return t+e.selectNumber*e.price*100}),0)}}},Lt=yt,kt=(i("ad09"),Object(d["a"])(Lt,et,it,!1,null,"40e43c8e",null)),_t=kt.exports,xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shopping-container"},[t._v(" 用户中心 "),i("BottomNav")],1)},jt=[],wt={components:{BottomNav:j}},Ct=wt,Tt=Object(d["a"])(Ct,xt,jt,!1,null,null,null),$t=Tt.exports,Rt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Nt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"not-found-container"},[n("img",{attrs:{src:i("2c81"),alt:""}})])}],Ot={},St=Ot,Et=(i("1e72"),Object(d["a"])(St,Rt,Nt,!1,null,"beac5f34",null)),Ut=Et.exports,It=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search-container"},[i("div",{staticClass:"from"},[i("router-link",{attrs:{to:"/classify"}},[i("van-icon",{staticClass:"arrow-left",attrs:{name:"arrow-left"}})],1),i("van-search",{staticClass:"search-input",attrs:{"show-action":"",placeholder:"苹果1.9/斤"},on:{search:t.onSearch,input:t.handleInput,focus:t.handleFocus},scopedSlots:t._u([{key:"action",fn:function(){return[t.searched?i("router-link",{ref:"icon",attrs:{to:"/shopping"}},[i("van-icon",{staticClass:"shopping-cart",attrs:{name:"shopping-cart-o",size:"1.7em",badge:t.shoppingTotal,color:"#323233"}})],1):t._e(),t.searched?t._e():i("div",{on:{touchend:t.onSearch}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t.searched?t._e():i("div",{staticClass:"likevalue"},[i("van-list",t._l(t.likeList,(function(e){return i("van-cell",{key:e,ref:"cell",refInFor:!0,nativeOn:{touchend:function(i){return t.onSearch(e)}},scopedSlots:t._u([{key:"title",fn:function(){return[i("span",{domProps:{innerHTML:t._s(t.formatHTML(e))}})]},proxy:!0}],null,!0)})})),1)],1),t.searched?i("div",{staticClass:"goodlist"},[i("van-list",{attrs:{"immediate-check":!1,finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.searchLists,(function(e,n){return i("div",{key:n,staticClass:"goods-card van-hairline--bottom"},[i("div",{staticClass:"img",attrs:{id:"img"+n}},[i("img",{attrs:{src:e.images[0]}})]),i("div",{staticClass:"container"},[i("div",{staticClass:"title"},[t._v(t._s(e.title))]),i("div",{staticClass:"desc"},[t._v(t._s(e.desc))]),i("div",{staticClass:"tag"},t._l(e.tags,(function(e,n){return i("div",{key:n,staticClass:"item"},[t._v(" "+t._s(e)+" ")])})),0),i("div",{staticClass:"price"},[t._v("￥"+t._s(e.price))]),i("div",{staticClass:"num"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.selectNumber>0,expression:"item.selectNumber > 0"}],staticClass:"reduce",on:{touchend:function(e){return t.handleReduce(n)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.selectNumber>0,expression:"item.selectNumber > 0"}],staticClass:"number"},[t._v(" "+t._s(e.selectNumber)+" ")]),i("div",{staticClass:"increase",on:{touchend:function(e){return t.handleIncrease(n)}}})])])])})),0)],1):t._e(),t.searched||0!==t.likeList.length?t._e():i("div",{staticClass:"history"},[i("History",{attrs:{history:t.history},on:{historyTouch:function(e){return t.onSearch(e)}}})],1)])},Bt=[],Gt=i("2909"),Mt=i("5530"),Pt=(i("4d63"),i("ac1f"),i("25f0"),i("5319"),i("9767"),i("fb6a"),function(t,e){var i=null;return function(){for(var n=this,s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];clearTimeout(i),i=setTimeout((function(){t.apply(n,r)}),e)}}),zt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"history-container"},[i("h3",[t._v("历史记录:")]),i("div",{staticClass:"content"},t._l(t.history,(function(e,n){return i("div",{key:n,staticClass:"item",on:{touchend:function(i){return t.handleTouch(e)}}},[t._v(" "+t._s(e)+" ")])})),0)])},Ht=[],Ft={props:["history"],methods:{handleTouch:function(t){this.$emit("historyTouch",t)}}},Wt=Ft,At=(i("f801"),Object(d["a"])(Wt,zt,Ht,!1,null,null,null)),Jt=At.exports,Vt={data:function(){return{value:"",likeList:[],searched:!1,page:1,size:7,searchList:[],listToal:0,loading:!1,finished:!1,history:[]}},components:{History:Jt},computed:{handleInput:function(){return Pt(this.Input,500)},searchLists:function(){var t=u();return this.searchList.map((function(e){return Object(Mt["a"])(Object(Mt["a"])({},e),{},{selectNumber:t[e.id]?t[e.id]:0})}))},shoppingTotal:function(){return this.$store.state.shoppingTotal}},created:function(){var t=0,e=u(),i=Object.values(e);i.forEach((function(e){t+=e})),this.$store.commit("changeShoppingTotal",t);var n=u("history");n&&(this.history=n)},methods:{handleReduce:function(t){var e=u();this.searchList=this.searchList.map((function(t){return Object(Mt["a"])(Object(Mt["a"])({},t),{},{selectNumber:e[t.id]?e[t.id]:0})})),this.searchList[t].selectNumber-=1,l(this.searchList[t].id,this.searchList[t].selectNumber),this.$store.commit("changeShoppingTotal",this.shoppingTotal-1)},handleIncrease:function(t){var e=u();this.searchList=this.searchList.map((function(t){return Object(Mt["a"])(Object(Mt["a"])({},t),{},{selectNumber:e[t.id]?e[t.id]:0})})),this.searchList[t].selectNumber||this.$set(this.searchList[t],"selectNumber",0),this.searchList[t].selectNumber+=1,l(this.searchList[t].id,this.searchList[t].selectNumber),this.$store.commit("changeShoppingTotal",this.shoppingTotal+1);var i=document.getElementById("img".concat(t)),n=this.searchList[t].images[0],s=i.getBoundingClientRect(),r=s.width,a=s.height,o=s.top,c=s.left,h={originUrl:n,originWidth:r,originHeight:a,originTop:o,originLeft:c},p=this.$refs.icon.$el.getBoundingClientRect(),d={targetTop:p.top-20,targetLeft:p.left-30};z({origin:h,target:d})},onLoad:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,mt(t.value,t.page,t.size);case 2:i=e.sent,t.searchList=[].concat(Object(Gt["a"])(t.searchList),Object(Gt["a"])(i.list)),t.page+=1,t.loading=!1,t.searchList.length===i.total&&(t.finished=!0,t.page=1);case 7:case"end":return e.stop()}}),e)})))()},formatHTML:function(t){var e=new RegExp(this.value,"g");return t.replace(e,this.value.fontcolor("red"))},onSearch:function(t){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if("string"===typeof t&&-1===e.history.indexOf(t)&&(e.history.unshift(t),localStorage.setItem("history",JSON.stringify(e.history))),e.history.length>10&&(e.history=e.history.slice(0,10)),e.page=1,"string"===typeof t&&(e.value=t),""!==e.value){i.next=6;break}return i.abrupt("return");case 6:return i.next=8,mt(e.value,e.page,e.size);case 8:n=i.sent,e.searchList=n.list,e.listToal=n.total,e.searched=!0,e.likeList=[],e.page+=1;case 14:case"end":return i.stop()}}),i)})))()},Input:function(t){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.value){i.next=3;break}return e.likeList=[],i.abrupt("return");case 3:return i.next=5,dt(t);case 5:n=i.sent,e.likeList=n.result;case 7:case"end":return i.stop()}}),i)})))()},handleFocus:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.searched=!1,t.value){e.next=4;break}return t.likeList=[],e.abrupt("return");case 4:return e.next=6,dt(t.value);case 6:i=e.sent,t.likeList=i.result;case 8:case"end":return e.stop()}}),e)})))()}}},Xt=Vt,Yt=(i("60b2"),Object(d["a"])(Xt,It,Bt,!1,null,"3d16068c",null)),qt=Yt.exports;n["a"].use(f["a"]);var Dt=[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:$,redirect:"/classify"},{path:"/classify",name:"classify",component:tt},{path:"/shopping",name:"shopping",component:_t},{path:"/user",name:"user",component:$t,redirect:"/classify"},{path:"/search",name:"search",component:qt},{path:"/*",name:"*",component:Ut}],Kt=new f["a"]({mode:"history",base:"/",routes:Dt}),Qt=Kt,Zt=(i("4e82"),i("2f62"));n["a"].use(Zt["a"]);var te=new Zt["a"].Store({state:{page:1,sidebar:[],goodsList:[],type:void 0,isLoading:!1,refreshing:!1,finished:!1,shoppingTop:0,shoppingLeft:0,shoppingTotal:0},mutations:{getSidebar:function(t,e){t.sidebar=e},getGoods:function(t,e){t.goodsList=e},changeType:function(t,e){t.type=e},pushGoods:function(t,e){t.goodsList=t.goodsList.concat(e)},changeIsLoading:function(t,e){t.isLoading=e},changeRefreshing:function(t,e){t.refreshing=e},changeFinished:function(t,e){t.finished=e},changePage:function(t,e){t.page=e},changeShoppingTop:function(t,e){t.shoppingTop=e},changeShoppingLeft:function(t,e){t.shoppingLeft=e},changeShoppingTotal:function(t,e){t.shoppingTotal=e}},actions:{getGoods:function(t,e){return Object(E["a"])(regeneratorRuntime.mark((function i(){var n,s,r,a,o,c,l,h,p,d;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.commit("changePage",1),t.commit("changeFinished",!1),t.commit("getGoods",[]),t.commit("changeIsLoading",!0),n=e.refreshing,s=e.page,r=void 0===s?1:s,a=e.size,o=void 0===a?10:a,c=e.sort,l=void 0===c?"all":c,h=e.type,h?t.commit("changeType",h):h=t.state.type,n&&t.commit("changeRefreshing",!0),i.next=10,ht(h,r,o,l);case 10:p=i.sent,d=u(),p.list.forEach((function(t){var e=t;d[t.id]&&(e.selectNumber=d[t.id])})),t.commit("getGoods",p.list),t.state.goodsList.length!==p.total&&0!==p.list.length||t.commit("changeFinished",!0),t.commit("changeIsLoading",!1),t.commit("changeRefreshing",!1),t.commit("changePage",t.state.page+1);case 18:case"end":return i.stop()}}),i)})))()},getSidebar:function(t,e){return Object(E["a"])(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,ut(e);case 2:n=i.sent,t.commit("getSidebar",n);case 4:case"end":return i.stop()}}),i)})))()},pushGoods:function(t,e){return Object(E["a"])(regeneratorRuntime.mark((function i(){var n,s,r,a,o,c,l,h,p;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.commit("changeIsLoading",!0),n=e.type,s=e.page,r=void 0===s?1:s,a=e.size,o=void 0===a?10:a,c=e.sort,l=void 0===c?"all":c,i.next=4,ht(n,r,o,l);case 4:h=i.sent,p=u(),h.list.forEach((function(t){var e=t;p[t.id]&&(e.selectNumber=p[t.id])})),t.commit("pushGoods",h.list),t.state.goodsList.length!==h.total&&0!==h.list.length||t.commit("changeFinished",!0),t.commit("changePage",t.state.page+1),t.commit("changeIsLoading",!1);case 11:case"end":return i.stop()}}),i)})))()}},modules:{}});i("499a"),i("157a");n["a"].use(s["a"]),n["a"].config.productionTip=!1,new n["a"]({router:Qt,store:te,render:function(t){return t(m)}}).$mount("#app")},"5cd2":function(t,e,i){"use strict";i("7778")},"60b2":function(t,e,i){"use strict";i("4374")},"68e6":function(t,e,i){},7778:function(t,e,i){},"7c55":function(t,e,i){"use strict";i("2395")},"7df7":function(t,e,i){},ad09:function(t,e,i){"use strict";i("42f1")},be6e:function(t,e,i){"use strict";i("7df7")},bea3:function(t,e,i){},e788:function(t,e,i){"use strict";i("68e6")},ee5d:function(t,e,i){"use strict";i("3c18")},f801:function(t,e,i){"use strict";i("bea3")}});
//# sourceMappingURL=app.ea898e8e.js.map